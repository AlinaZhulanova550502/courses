<html>
	<title>menu</title>
	<head>
		<meta charset="utf-8">
		<!--link rel="stylesheet" href="cssToles8.css"/-->
	</head>

	<body>
	<datalist id="sel"></datalist>

	<script>
		document.oncontextmenu = function(){return false}; 	//запрет старого контекстного меню

		one = function(e){alert("1"); e.stopPropagation()};
		two =  function(e){alert("2"); e.stopPropagation()};
		three = function(e){alert("3"); e.stopPropagation()};

		var elem = new Object();
		var sel = document.getElementById("sel");

		var options = new Array('<option value="one">Первое</option>','<option value="two">Второе</option>','<option value="three">Третье</option>','<option value="hf">Четвертое</option>','<option value="red">Пятое</option>');

		options.forEach(function(opt) {
				sel.innerHTML += opt;
			})
		sel.style.display = "none";

		var opt = document.getElementsByTagName("option");
		for(i=0; i<opt.lenght; i++)
    	{
    		if (opt[i].value == "one")
     			opt[i].addEventListener("click", one);
      		if (opt[i].value == "two")
      			opt[i].addEventListener("click", two);
      		if (opt[i].value == "three")
      			opt[i].addEventListener("click", three);
  		}

		document.body.addEventListener("contextmenu", function(e){	
			var x = e.clientX; var y = e.clientY;
			var r = sel.getBoundingClientRect();
			var wid = r.right-r.left; var hei = r.bottom - r.top;
			console.log("w: " + wid); console.log("h: " + hei); console.log("x: " + x); console.log("y: "+y);
			console.log(document.body.clientWidth); console.log(document.body.clientHeight); 
			if((x+wid>document.body.clientWidth) || (y+hei>document.body.clientHeight))
			{
				x = x - wid; y = y - hei;
			}
			if(x-wid<0)
				x = x+wid;
			jk = y-hei;
			if(jk<0)
				y = y+(-jk);

			sel.style.position = "absolute";
			sel.style.top = y;
			sel.style.left = x;

			sel.style.display = "block";

			document.body.addEventListener("click", function(){
				if (document.getElementById("sel")!=null)
					sel.style.display = "none";
			})
		})

	</script>
	</body>
</html>